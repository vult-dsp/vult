/* This code was generated by the Vult compiler v1-dev https://github.com/vult-dsp/vult */

#include "saw_eptr.h"

fix16_t Saw_eptr_process(Saw_eptr_process_type& _ctx, fix16_t cv) {
   fix16_t y = 0x0 /* 0.000000 */;
   if (Util_change(_ctx.inst_1b09f, cv)) {
      _ctx.rate = Util_cvToRate(cv);
   }
   _ctx.phase = fix_mul(0x20000 /* 2.000000 */, _ctx.rate) + _ctx.phase;
   if (_ctx.phase > 0x10000 /* 1.000000 */ + (- _ctx.rate)) {
      y = -0x10000 /* -1.000000 */ + (- fix_div(_ctx.phase, _ctx.rate)) + fix_div(0x10000 /* 1.000000 */, _ctx.rate) + _ctx.phase;
      _ctx.phase = -0x20000 /* -2.000000 */ + _ctx.phase;
   }
   else {
      y = _ctx.phase;
   }
   return y;
}

