/* This code was generated by the Vult compiler v1-dev https://github.com/modlfo/vult */

#include "saw_ptr1.h"

float Saw_ptr1_process(Saw_ptr1_process_type& _ctx, float cv) {
   if (Util_change(_ctx.inst_1b06f, cv)) {
      _ctx.rate = Util_cvToRate(cv);
   }
   float s1 = _ctx.rate;
   float dc = (-1.0f);
   _ctx.phase = (_ctx.phase + _ctx.rate);
   float out = 0.0f;
   if ((_ctx.phase > 1.0f)) {
      _ctx.phase = (_ctx.phase - 1.0f);
   }
   else {
      _ctx.phase = _ctx.phase;
   }
   if ((_ctx.phase < s1)) {
      float d = (_ctx.phase / _ctx.rate);
      out = ((((-2.0f) * d) + 2.0f) + dc);
   }
   else {
      out = ((2.0f * _ctx.phase) - dc);
   }
   return out;
}

