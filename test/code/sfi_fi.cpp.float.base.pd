/* This code was generated by the Vult compiler v1-dev https://github.com/vult-dsp/vult */

#include "sfi_fi.h"


extern "C" {

static t_class *Sfi_fi_process_tilde_class;

typedef struct _Sfi_fi_process_tilde {
   t_object  x_obj;
   float dummy;
   Sfi_fi_process_type data;
} t_Sfi_fi_process_tilde;

t_int *Sfi_fi_process_tilde_perform(t_int *w)
{
   t_Sfi_fi_process_tilde *x = (t_Sfi_fi_process_tilde *)(w[1]);

   t_sample *in_0 = (t_sample *)(w[2]);
   t_sample *in_1 = (t_sample *)(w[3]);
   t_sample *out_0 = (t_sample *)(w[4]);
   t_sample *out_1 = (t_sample *)(w[5]);

   int n = (int)(w[6]);

   while (n--) {
    Sfi_fi_process(x->data, *(in_0++), (int)*(in_1++));
   *(out_0++) = x->data.Sfi_fi_process_ret_0;
   *(out_1++) = (float)x->data.Sfi_fi_process_ret_1;

   }

   return (w+7);
}

void Sfi_fi_process_tilde_dsp(t_Sfi_fi_process_tilde *x, t_signal **sp)
{
   dsp_add(Sfi_fi_process_tilde_perform, 6,
   x,
   sp[0]->s_vec,
   sp[1]->s_vec,
   sp[2]->s_vec,
   sp[3]->s_vec,

   sp[0]->s_n);
}

void *Sfi_fi_process_tilde_new()
{
   t_Sfi_fi_process_tilde *x = (t_Sfi_fi_process_tilde *)pd_new(Sfi_fi_process_tilde_class);

   Sfi_fi_process_type_init(x->data);

   inlet_new(&x->x_obj, &x->x_obj.ob_pd, &s_signal, &s_signal);

   outlet_new(&x->x_obj, &s_signal);
   outlet_new(&x->x_obj, &s_signal);

   return (void *)x;
}

void Sfi_fi_process_tilde_delete(t_Sfi_fi_process_tilde *x){

}

void Sfi_fi_process_tilde_setup(void) {
   Sfi_fi_process_tilde_class = class_new(gensym("Sfi_fi_process~"),
      (t_newmethod)Sfi_fi_process_tilde_new, // constructor function
      (t_method)Sfi_fi_process_tilde_delete, // destructor function
      sizeof(t_Sfi_fi_process_tilde), // size of the object
      CLASS_DEFAULT, // type of object
      A_NULL); // arguments passed

   class_addmethod(Sfi_fi_process_tilde_class, (t_method)Sfi_fi_process_tilde_dsp, gensym("dsp"), A_NULL);
   CLASS_MAINSIGNALIN(Sfi_fi_process_tilde_class, t_Sfi_fi_process_tilde, dummy);
}

} // extern "C"

void sfi_fi_setup() {

   Sfi_fi_process_tilde_setup();
}