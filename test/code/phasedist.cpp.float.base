/* This code was generated by the Vult compiler v1-dev https://github.com/modlfo/vult */

#include "phasedist.h"

void Phasedist_process_type_init(Phasedist_process_type& _ctx) {
   _ctx.detune = 0.0f;
   Phasedist_phasor_type_init(_ctx.inst_117e9);
   Phasedist_smooth_type_init(_ctx.inst_275e9);
   Phasedist_phasor_type_init(_ctx.inst_317e9);
   Phasedist_smooth_type_init(_ctx.inst_475e9);
   _ctx.pitch = 0.0f;
   _ctx.pre_phase1 = 0.0f;
   _ctx.volume = 0.0f;
}

float Phasedist_phasor(Phasedist_phasor_type& _ctx, float pitch, bool reset) {
   if (Phasedist_change(_ctx.inst_1e817, pitch)) {
      _ctx.rate = Phasedist_pitchToRate(pitch);
   }
   if (reset) {
      _ctx.phase = 0.0f;
   }
   else {
      _ctx.phase = (_ctx.phase + _ctx.rate);
   }
   if ((_ctx.phase > 1.0f)) {
      _ctx.phase = (_ctx.phase - 1.0f);
   }
   else {
      _ctx.phase = _ctx.phase;
   }
   return _ctx.phase;
}

